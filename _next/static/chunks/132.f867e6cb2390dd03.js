"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[132],{132:function(e,t,n){n.r(t),n.d(t,{default:function(){return tD}});var i=n(1527),o=n(959),r=n(9228);let a={canvasBackgroundColor:"#6662",canvasHeight:"61.8vh",ignoreCaptionLabels:[],openSeadragon:{},renderAbout:!0,showIIIFBadge:!0,showInformationToggle:!0,showTitle:!0,withCredentials:!1,requestHeaders:{"Content-Type":"application/json"}},l={activeCanvas:"",activeManifest:"",collection:{},configOptions:a,informationExpanded:!0,isLoaded:!1,vault:new r.j},s=o.createContext(l),d=o.createContext(l);function c(e,t){switch(t.type){case"updateActiveCanvas":return t.canvasId||(t.canvasId=""),{...e,activeCanvas:t.canvasId};case"updateActiveManifest":return{...e,activeManifest:t.manifestId};case"updateCollection":return{...e,collection:t.collection};case"updateConfigOptions":return{...e,configOptions:{...a,...t.configOptions}};case"updateInformationExpanded":return{...e,informationExpanded:t.informationExpanded};case"updateIsLoaded":return{...e,isLoaded:t.isLoaded};default:throw Error("Unhandled action type: ".concat(t.type))}}let h=e=>{let{initialState:t=l,children:n}=e,[r,a]=(0,o.useReducer)(c,t);return(0,i.jsx)(s.Provider,{value:r,children:(0,i.jsx)(d.Provider,{value:a,children:n})})};function u(){let e=o.useContext(s);if(void 0===e)throw Error("useViewerState must be used within a ViewerProvider");return e}function m(){let e=o.useContext(d);if(void 0===e)throw Error("useViewerDispatch must be used within a ViewerProvider");return e}var p=n(2304);let x=(e,t,n,i)=>{let o={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]};if(o.canvas=e.get(t),o.canvas){var r,a;o.annotationPage=e.get(o.canvas.items[0]),o.accompanyingCanvas=(null===(r=o.canvas)||void 0===r?void 0:r.accompanyingCanvas)?e.get(null===(a=o.canvas)||void 0===a?void 0:a.accompanyingCanvas):void 0}return o.annotationPage&&(o.annotations=e.get(o.annotationPage.items).filter(o=>{if(o){if(!o.body||!o.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",o);return}if(!o.body)return;let r=o.body;Array.isArray(r)&&(r=r[0]);let a=e.get(r.id);if(a)switch(n){case"painting":return o.target===t.id&&o.motivation&&"painting"===o.motivation[0]&&i.includes(a.type)&&(o.body=a),o;case"supplementing":return;default:throw Error("Invalid annotation motivation.")}}})),o},g=(e,t)=>{let n=x(e,{id:t,type:"Canvas"},"painting",["Image","Sound","Video"]);if(0!==n.annotations.length&&n.annotations[0]&&n.annotations[0].body)return n.annotations[0].body},f=(e,t,n)=>{let i=e.get({id:t,type:"Canvas"});if(!(null==i?void 0:i.annotations)||!i.annotations[0])return[];let o=e.get(i.annotations[0]),r=e.get(o.items);return Array.isArray(r)?r.filter(t=>{var i;if(t.body&&(null===(i=t.motivation)||void 0===i?void 0:i.includes("supplementing"))){let i=t.body;Array.isArray(i)&&(i=i[0]);let o=e.get(i.id);if(o.format===n)return t.body=o,t}}).map(e=>e.body):[]};var v=n(1524),b=n(9710);let j=(0,b.zo)("div",{display:"flex",flexDirection:"column",alignItems:"center"}),y=(0,b.zo)("p",{fontWeight:"bold",fontSize:"x-large"}),w=(0,b.zo)("span",{fontSize:"medium"});var C=e=>{let{error:t}=e,{message:n}=t;return(0,i.jsxs)(j,{role:"alert",children:[(0,i.jsx)(y,{"data-testid":"headline",children:"Something went wrong"}),n&&(0,i.jsxs)(w,{children:["Error message: ".concat(n)," "]})]})};let z=(0,b.zo)("div",{position:"relative",zIndex:"0"}),k=(0,b.zo)("div",{display:"flex",flexDirection:"row",overflow:"hidden","@sm":{flexDirection:"column"}}),S=(0,b.zo)("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",width:"61.8%","@sm":{width:"100%"}}),I=(0,b.zo)(p.xz,{display:"none",background:"transparent",border:"none",margin:"0",padding:"0",transition:"$all",opacity:"1","&[data-navigator='false']":{opacity:"0",marginTop:"-59px"},"@sm":{display:"flex","> span":{border:"1px solid",display:"flex",flexGrow:"1",justifyContent:"center",margin:"1rem 0",padding:"0.5rem"}}}),M=(0,b.zo)(p.VY,{width:"100%",display:"flex"}),$=(0,b.zo)("aside",{display:"flex",flexGrow:"1",flexShrink:"0",width:"38.2%",maxHeight:"100%","@sm":{width:"100%"}}),L=(0,b.zo)("div",{display:"flex",flexDirection:"column",fontSmooth:"auto",webkitFontSmoothing:"antialiased","> div":{display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"flex-start","@sm":{["& ".concat(k)]:{flexGrow:"1"},["& ".concat(S)]:{flexGrow:"0"}}},"@sm":{padding:"0"},"&[data-navigator-open='true']":{"@sm":{position:"fixed",height:"100%",width:"100%",top:"0",left:"0",zIndex:"2500000000",["& ".concat(z)]:{display:"none"},["& ".concat(M)]:{height:"100%"}}}});var A=n(2438);let E=(0,b.zo)(A.fC,{display:"flex",flexDirection:"row",flexGrow:"1",padding:"1.618rem",overflowX:"scroll",position:"relative",zIndex:"0"}),R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";if(!e)return"";if(!e[t]){let t=Object.getOwnPropertyNames(e);if(t.length>0)return e[t[0]]}return e[t]},T=(e,t,n,i)=>{let o=[];if(t.canvas&&t.canvas.thumbnail.length>0){let n=e.get(t.canvas.thumbnail[0]);o.push(n)}if(t.annotations[0]){if(t.annotations[0].thumbnail&&t.annotations[0].thumbnail.length>0){let n=e.get(t.annotations[0].thumbnail[0]);o.push(n)}if(!t.annotations[0].body)return;let n=t.annotations[0].body;"Image"===n.type&&o.push(n)}if(0===o.length)return;let r={id:o[0].id,format:o[0].format,type:o[0].type,width:n,height:i};return r},F=(0,b.zo)("svg",{display:"inline-flex",variants:{isLarge:{true:{height:"4rem",width:"4rem"}},isMedium:{true:{height:"2rem",width:"2rem"}},isSmall:{true:{height:"1rem",width:"1rem"}}}}),H=e=>(0,i.jsx)(F,{...e,"data-testid":"icon-svg",role:"img",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:e.children});H.Title=e=>{let{children:t}=e;return(0,i.jsx)("title",{children:t})},H.Add=()=>(0,i.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288M400 256H112"}),H.Audio=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z"}),(0,i.jsx)("path",{d:"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z"}),(0,i.jsx)("path",{d:"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z"})]}),H.Close=()=>(0,i.jsx)("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}),H.Image=()=>(0,i.jsx)("path",{d:"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z"}),H.Video=()=>(0,i.jsx)("path",{d:"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z"});var B=n(1318);let V=(0,b.F4)({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),W=(0,b.F4)({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),O=(0,b.zo)(B.Eh,{fill:"$secondaryAlt"}),P=(0,b.zo)(B.x8,{position:"absolute",right:"0",top:"0",padding:"0.5rem",margin:"0",cursor:"pointer",border:"none",background:"none",fill:"inherit","&:hover":{opacity:"0.75"}}),_=(0,b.zo)(B.VY,{border:"none",backgroundColor:"white",fill:"inhrerit",padding:"1rem 2rem 1rem 1rem",width:"auto",minWidth:"200px",maxWidth:"350px",borderRadius:"3px",boxShadow:"5px 5px 13px #0002",animationDuration:"0.3s",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",'&[data-side="top"]':{animationName:W},'&[data-side="bottom"]':{animationName:V},'&[data-align="end"]':{["& ".concat(O)]:{margin:"0 0.7rem"}}}),D=(0,b.zo)(B.xz,{display:"inline-flex",padding:"0.5rem 0",margin:"0 0.5rem 0 0",cursor:"pointer",border:"none",background:"none","> button, > span":{margin:"0"}}),N=(0,b.zo)(B.fC,{boxSizing:"content-box"}),G=e=>{let{children:t}=e;return(0,i.jsx)(N,{children:t})};G.Trigger=e=>(0,i.jsx)(D,{...e,children:e.children}),G.Content=e=>(0,i.jsxs)(_,{...e,children:[(0,i.jsx)(O,{}),(0,i.jsx)(P,{children:(0,i.jsx)(H,{isSmall:!0,children:(0,i.jsx)(H.Close,{})})}),e.children]});let Z=(0,b.zo)("div",{boxSizing:"border-box",display:"inline-flex",alignItems:"center",borderRadius:"5px",padding:"$1",marginBottom:"$2",marginRight:"$2",backgroundColor:"$lightGrey",color:"$richBlack50",textTransform:"uppercase",fontSize:"$2",objectFit:"contain",lineHeight:"1em !important","&:last-child":{marginRight:"0"},["".concat(F)]:{position:"absolute",left:"$1",height:"$3",width:"$3"},variants:{isIcon:{true:{position:"relative",paddingLeft:"$5"}}}}),q=(0,b.zo)("span",{display:"flex"}),Y=(0,b.zo)("span",{display:"flex",width:"1.2111rem",height:"0.7222rem"}),U=(0,b.zo)("span",{display:"inline-flex",marginLeft:"5px",marginBottom:"-1px"}),J=(0,b.zo)(A.ck,{display:"flex",flexShrink:"0",margin:"0 1.618rem 0 0",padding:"0",cursor:"pointer",background:"none",border:"none",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",textAlign:"left","&:last-child":{marginRight:"1rem"},figure:{margin:"0",width:"161.8px","> div":{position:"relative",display:"flex",backgroundColor:"$secondaryAlt",width:"inherit",height:"100px",overflow:"hidden",borderRadius:"3px",transition:"$all",img:{width:"100%",height:"100%",objectFit:"cover",filter:"blur(0)",transform:"scale3d(1, 1, 1)",transition:"$all",color:"transparent"},["& ".concat(q)]:{position:"absolute",right:"0",bottom:"0",["& ".concat(Z)]:{margin:"0",paddingLeft:"0",fontSize:"0.7222rem",backgroundColor:"#000d",color:"$secondary",fill:"$secondary",borderBottomLeftRadius:"0",borderTopRightRadius:"0"}}},figcaption:{marginTop:"0.5rem",fontWeight:"400",fontSize:"0.8333rem",display:"-webkit-box",overflow:"hidden",MozBoxOrient:"vertical",WebkitBoxOrient:"vertical",WebkitLineClamp:"5","@sm":{fontSize:"0.8333rem"}}},"&[aria-checked='true']":{figure:{"> div":{backgroundColor:"$primaryAlt","&::before":{position:"absolute",zIndex:"1",color:"$secondaryMuted",content:"Active Item",textTransform:"uppercase",fontWeight:"700",fontSize:"0.6111rem",letterSpacing:"0.03rem",display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",textAlign:"center",textShadow:"5px 5px 5px #0003"},img:{opacity:"0.3",transform:"scale3d(1.1, 1.1, 1.1)",filter:"blur(2px)"},["& ".concat(q)]:{["& ".concat(Z)]:{backgroundColor:"$accent"}}}},figcaption:{fontWeight:"700"}}});var X=n(9541),K=n(2377);let Q=e=>{let{type:t}=e;switch(t){case"Sound":return(0,i.jsx)(H.Audio,{});case"Image":default:return(0,i.jsx)(H.Image,{});case"Video":return(0,i.jsx)(H.Video,{})}};var ee=e=>{let{canvas:t,canvasIndex:n,isActive:o,thumbnail:r,type:a,handleChange:l}=e;return(0,i.jsx)(J,{"aria-checked":o,"data-testid":"media-thumbnail","data-canvas":n,onClick:()=>l(t.id),value:t.id,children:(0,i.jsxs)("figure",{children:[(0,i.jsxs)("div",{children:[(null==r?void 0:r.id)&&(0,i.jsx)("img",{src:r.id,alt:(null==t?void 0:t.label)?R(t.label):""}),(0,i.jsx)(q,{children:(0,i.jsxs)(Z,{isIcon:!0,"data-testid":"thumbnail-tag",children:[(0,i.jsx)(Y,{}),(0,i.jsx)(H,{"aria-label":a,children:(0,i.jsx)(Q,{type:a})}),["Video","Sound"].includes(a)&&(0,i.jsx)(U,{children:(0,K.rJ)(t.duration)})]})})]}),(null==t?void 0:t.label)&&(0,i.jsx)("figcaption",{"data-testid":"fig-caption",children:(0,i.jsx)(X.__,{label:t.label})})]})})};let et=e=>e.body?e.body.type:"Image",en=(0,b.zo)("div",{position:"absolute",right:"1rem",top:"1rem",display:"flex",justifyContent:"flex-end",zIndex:"1"}),ei=(0,b.zo)("input",{flexGrow:"1",border:"none",backgroundColor:"$secondaryMuted",color:"$primary",marginRight:"1rem",height:"2rem",padding:"0 1rem",borderRadius:"2rem",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1rem",boxShadow:"inset 1px 1px 2px #0003","&::placeholder":{color:"$primaryMuted"}}),eo=(0,b.zo)("button",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}}),er=(0,b.zo)("div",{display:"flex",marginRight:"0.618rem",backgroundColor:"$accentAlt",borderRadius:"2rem",boxShadow:"5px 5px 5px #0003",color:"$secondary",alignItems:"center","> span":{display:"flex",margin:"0 0.5rem",fontSize:"0.7222rem"}}),ea=(0,b.zo)("div",{display:"flex",position:"relative",zIndex:"1",width:"100%",padding:"0",transition:"$all",variants:{isToggle:{true:{paddingTop:"2.618rem",["& ".concat(en)]:{width:"calc(100% - 2rem)","@sm":{width:"calc(100% - 2rem)"}}}}}});var el=(e,t)=>{(0,o.useEffect)(()=>{function n(n){n.key===e&&t()}return window.addEventListener("keyup",n),()=>window.removeEventListener("keyup",n)},[])};let es=()=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[(0,i.jsx)("title",{children:"Arrow Back"}),(0,i.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})]}),ed=()=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[(0,i.jsx)("title",{children:"Arrow Forward"}),(0,i.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M268 112l144 144-144 144M392 256H100"})]}),ec=()=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[(0,i.jsx)("title",{children:"Close"}),(0,i.jsx)("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})]}),eh=()=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[(0,i.jsx)("title",{children:"Search"}),(0,i.jsx)("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})]});var eu=e=>{let{handleCanvasToggle:t,handleFilter:n,activeIndex:r,canvasLength:a}=e,[l,s]=(0,o.useState)(!1),[d,c]=(0,o.useState)(!1),[h,u]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{0===r?u(!0):u(!1),r===a-1?c(!0):c(!1)},[r]),el("Escape",()=>{s(!1),n("")}),(0,i.jsx)(ea,{isToggle:l,children:(0,i.jsxs)(en,{children:[l&&(0,i.jsx)(ei,{autoFocus:!0,onChange:e=>n(e.target.value),placeholder:"Search"}),!l&&(0,i.jsxs)(er,{children:[(0,i.jsx)(eo,{onClick:()=>t(-1),disabled:h,type:"button",children:(0,i.jsx)(es,{})}),(0,i.jsxs)("span",{children:[r+1," of ",a]}),(0,i.jsx)(eo,{onClick:()=>t(1),disabled:d,type:"button",children:(0,i.jsx)(ed,{})})]}),(0,i.jsx)(eo,{onClick:()=>{s(e=>!e),n("")},type:"button",children:l?(0,i.jsx)(ec,{}):(0,i.jsx)(eh,{})})]})})},em=e=>{let{items:t}=e,n=m(),r=u(),{activeCanvas:a,vault:l}=r,[s,d]=(0,o.useState)(""),[c,h]=(0,o.useState)([]),[p,g]=(0,o.useState)(0),f=o.useRef(null),v=["Image","Sound","Video"],b=e=>{a!==e&&n({type:"updateActiveCanvas",canvasId:e})};return(0,o.useEffect)(()=>{if(!c.length){let e=t.map(e=>x(l,e,"painting",v)).filter(e=>e.annotations.length>0);h(e)}},[]),(0,o.useEffect)(()=>{c.forEach((e,t)=>{(null==e?void 0:e.canvas)&&e.canvas.id===a&&g(t)})},[a]),(0,o.useEffect)(()=>{let e=document.querySelector('[data-canvas="'.concat(p,'"]'));if(e instanceof HTMLElement&&f.current){let t=e.offsetLeft-f.current.offsetWidth/2+e.offsetWidth/2;f.current.scrollTo({left:t,behavior:"smooth"})}},[p]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eu,{handleFilter:e=>d(e),handleCanvasToggle:e=>{let t=c[p+e];(null==t?void 0:t.canvas)&&b(t.canvas.id)},activeIndex:p,canvasLength:c.length}),(0,i.jsx)(E,{"aria-label":"select item","data-testid":"media",ref:f,children:c.filter(e=>{var t;if(null===(t=e.canvas)||void 0===t?void 0:t.label){let t=R(e.canvas.label);if(Array.isArray(t))return t[0].toLowerCase().includes(s.toLowerCase())}}).map((e,t)=>{var n,o;return(0,i.jsx)(ee,{canvas:e.canvas,canvasIndex:t,handleChange:b,isActive:a===(null==e?void 0:null===(n=e.canvas)||void 0===n?void 0:n.id),thumbnail:T(l,e,200,200),type:et(e.annotations[0])},null==e?void 0:null===(o=e.canvas)||void 0===o?void 0:o.id)})})]})},ep=n(2038);let ex=(0,b.zo)(ep.fC,{display:"flex",flexDirection:"column",width:"100%",height:"100%",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maskImage:"linear-gradient(180deg, rgba(0, 0, 0, 1) calc(100% - 2rem), transparent 100%)","@sm":{marginTop:"0.5rem",boxShadow:"none"}}),eg=(0,b.zo)(ep.aV,{display:"flex",flexGrow:"0",margin:"0 1.618rem",borderBottom:"4px solid $secondaryAlt","@sm":{margin:"0 1rem"}}),ef=(0,b.zo)(ep.xz,{display:"flex",position:"relative",padding:"0.5rem 1rem",background:"none",backgroundColor:"transparent",border:"none",fontSize:"1rem",marginRight:"1rem",lineHeight:"1rem",whiteSpace:"nowrap",cursor:"pointer",fontWeight:700,transition:"$all","&::after":{width:"0",height:"4px",content:"",position:"absolute",bottom:"-4px",left:"0",transition:"$all"},"&[data-state='active']":{color:"$accent","&::after":{width:"100%",backgroundColor:"$accent"}}}),ev=(0,b.zo)(ep.VY,{display:"flex",flexGrow:"1",flexShrink:"0",position:"absolute",top:"0",left:"0","&[data-state='active']":{width:"100%",height:"calc(100% - 2rem)",padding:"1rem 0"}}),eb=(0,b.zo)("div",{position:"relative",height:"100%",width:"100%",overflowY:"scroll"}),ej=(0,b.F4)({from:{transform:"rotate(360deg)"},to:{transform:"rotate(0deg)"}}),ey=(0,b.zo)(A.fC,{display:"flex",flexDirection:"column",width:"100%"}),ew=(0,b.zo)(A.ck,{position:"relative",cursor:"pointer",display:"flex",width:"100%",justifyContent:"space-between",textAlign:"left",margin:"0",padding:"0.5rem 1.618rem",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",color:"inherit",border:"none",background:"none","@sm":{padding:"0.5rem 1rem",fontSize:"0.8333rem"},"&::before":{content:"",width:"12px",height:"12px",borderRadius:"12px",position:"absolute",backgroundColor:"$primaryMuted",opacity:"0",left:"8px",marginTop:"3px",boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",opacity:"0",clipPath:"polygon(100% 50%, 0 100%, 0 0)",left:"13px",marginTop:"6px",boxSizing:"content-box","@sm":{content:"unset"}},strong:{marginLeft:"1rem"},"&:hover":{color:"$accent","&::before":{backgroundColor:"$accent",opacity:"1"},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",clipPath:"polygon(100% 50%, 0 100%, 0 0)",opacity:"1"}},"&[aria-checked='true']":{color:"$primary",backgroundColor:"$secondaryMuted","&::before":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accentMuted",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1s linear infinite",animationName:ej,boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accent",clipPath:"polygon(100% 0, 100% 100%, 0 0)",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1.5s linear infinite",animationName:ej,boxSizing:"content-box","@sm":{content:"unset"}}}});var eC=n(9168),ez=()=>{function e(e){return e.map(e=>{let t=e.identifier||(0,eC.Z)();return{...e,identifier:t}})}return{addIdentifiersToParsedCues:e,createNestedCues:function(t){let n=[],i=[],o=e(t);for(let e of o){for(;i.length>0&&i[i.length-1].end<=e.start;)i.pop();if(i.length>0){var r;i[i.length-1].children||(i[i.length-1].children=[]),null===(r=i[i.length-1].children)||void 0===r||r.push(e),i.push(e)}else n.push(e),i.push(e)}return n},isChild:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.some(t=>e.start>=t.start&&e.end<=t.end)},orderCuesByTime:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((e,t)=>e.start-t.start)}}},ek=e=>{let{label:t,start:n,end:r}=e,[a,l]=(0,o.useState)(!1),s=document.getElementById("clover-iiif-video");return(0,o.useEffect)(()=>(null==s||s.addEventListener("timeupdate",()=>{let{currentTime:e}=s;l(n<=e&&e<r)}),()=>document.removeEventListener("timeupdate",()=>{})),[s]),(0,i.jsxs)(ew,{"aria-checked":a,"data-testid":"navigator-cue",onClick:()=>{s&&(s.pause(),s.currentTime=n,s.play())},value:t,children:[t,(0,i.jsx)("strong",{children:(0,K.rJ)(n)})]})};let eS=(0,b.zo)("ul",{listStyle:"none",paddingLeft:"1rem",position:"relative","&&:first-child":{paddingLeft:"0"},"& li ul":{["& ".concat(ew)]:{backgroundColor:"unset","&::before":{content:"none"},"&::after":{content:"none"}}},"&:first-child":{margin:"0 0 1.618rem"}}),eI=e=>{let{items:t}=e;return(0,i.jsx)(eS,{children:t.map(e=>{let{text:t,start:n,end:o,children:r,identifier:a}=e;return(0,i.jsxs)("li",{children:[(0,i.jsx)(ek,{label:t,start:n,end:o}),r&&(0,i.jsx)(eI,{items:r})]},a)})})};var eM=n(3836),e$=e=>{let{resource:t}=e,[n,r]=o.useState([]),{id:a,label:l}=t,{createNestedCues:s,orderCuesByTime:d}=ez();return(0,o.useEffect)(()=>{a&&fetch(a,{headers:{"Content-Type":"text/plain",Accept:"application/json"}}).then(e=>e.text()).then(e=>{let t=(0,eM.parse)(e).cues,n=d(t),i=s(n);r(i)}).catch(e=>console.error(a,e.toString()))},[a]),(0,i.jsx)(ey,{"aria-label":"navigate ".concat(R(l,"en")),children:(0,i.jsx)(eI,{items:n})})};let eL=(0,b.zo)("div",{padding:" 0 1.618rem 2rem",display:"flex",flexDirection:"column",overflow:"scroll",position:"absolute",fontWeight:"400",fontSize:"1rem",zIndex:"0",img:{maxWidth:"100px",maxHeight:"100px",objectFit:"contain",color:"transparent",margin:"0 0 1rem",borderRadius:"3px",backgroundColor:"$secondaryMuted"},video:{display:"none"},"a, a:visited":{color:"$accent"},p:{fontSize:"1rem",lineHeight:"1.45em",margin:"0"},dl:{margin:"0",dt:{fontWeight:"700",margin:"1rem 0 0.25rem"},dd:{margin:"0"}},".manifest-property-title":{fontWeight:"700",margin:"1rem 0 0.25rem"},"ul, ol":{padding:"0",margin:"0",li:{fontSize:"1rem",lineHeight:"1.45em",listStyle:"none",margin:"0.25rem 0 0.25rem"}}}),eA=(0,b.zo)("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"});var eE=e=>{let{homepage:t}=e;return(null==t?void 0:t.length)===0?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"manifest-property-title",children:"Homepage"}),(0,i.jsx)(X.bw,{homepage:t})]})},eR=e=>{let{id:t,htmlLabel:n,parent:o="manifest"}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"manifest-property-title",children:n}),(0,i.jsx)("a",{href:t,target:"_blank",id:"iiif-".concat(o,"-id"),children:t})]})},eT=e=>{let{metadata:t,parent:n="manifest"}=e;return t?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(X.SF,{metadata:t,id:"iiif-".concat(n,"-metadata")})}):(0,i.jsx)(i.Fragment,{})},eF=e=>{let{requiredStatement:t,parent:n="manifest"}=e;return t?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(X.bT,{requiredStatement:t,id:"iiif-".concat(n,"-required-statement")})}):(0,i.jsx)(i.Fragment,{})},eH=e=>{let{rights:t}=e;return t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"manifest-property-title",children:"Rights"}),(0,i.jsx)("a",{href:t,target:"_blank",children:t})]}):(0,i.jsx)(i.Fragment,{})},eB=e=>{let{seeAlso:t}=e;return(null==t?void 0:t.length)===0?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"manifest-property-title",children:"See Also"}),(0,i.jsx)(X.QZ,{seeAlso:t})]})},eV=e=>{let{summary:t,parent:n="manifest"}=e;return t?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(X.ER,{summary:t,as:"p",id:"iiif-".concat(n,"-summary")})}):(0,i.jsx)(i.Fragment,{})},eW=e=>{let{label:t,thumbnail:n}=e;return(null==n?void 0:n.length)===0?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(X.pl,{altAsLabel:t||{none:["resource"]},thumbnail:n})})},eO=()=>{let e=u(),{activeManifest:t,vault:n}=e,[r,a]=(0,o.useState)(),[l,s]=(0,o.useState)([]),[d,c]=(0,o.useState)([]),[h,m]=(0,o.useState)([]);return((0,o.useEffect)(()=>{var e,i,o;let r=n.get(t);a(r),(null===(e=r.homepage)||void 0===e?void 0:e.length)>0&&s(n.get(r.homepage)),(null===(i=r.seeAlso)||void 0===i?void 0:i.length)>0&&c(n.get(r.seeAlso)),(null===(o=r.thumbnail)||void 0===o?void 0:o.length)>0&&m(n.get(r.thumbnail))},[t,n]),r)?(0,i.jsx)(eA,{children:(0,i.jsxs)(eL,{children:[(0,i.jsx)(eW,{thumbnail:h,label:r.label}),(0,i.jsx)(eV,{summary:r.summary}),(0,i.jsx)(eT,{metadata:r.metadata}),(0,i.jsx)(eF,{requiredStatement:r.requiredStatement}),(0,i.jsx)(eH,{rights:r.rights}),(0,i.jsx)(eE,{homepage:l}),(0,i.jsx)(eB,{seeAlso:d}),(0,i.jsx)(eR,{id:r.id,htmlLabel:"IIIF Manifest"})]})}):(0,i.jsx)(i.Fragment,{})},eP=e=>{let{activeCanvas:t,resources:n}=e,r=u(),{configOptions:a}=r,{renderAbout:l}=a,[s,d]=(0,o.useState)();return((0,o.useEffect)(()=>{l?d("manifest-about"):n&&(null==n?void 0:n.length)>0&&!l&&d(n[0].id)},[t,n]),n)?(0,i.jsxs)(ex,{"data-testid":"navigator",defaultValue:s,onValueChange:e=>{d(e)},orientation:"horizontal",value:s,children:[(0,i.jsxs)(eg,{"aria-label":"select chapter","data-testid":"navigator-list",children:[l&&(0,i.jsx)(ef,{value:"manifest-about",children:"About"}),n&&n.map(e=>{let{id:t,label:n}=e;return(0,i.jsx)(ef,{value:t,children:(0,i.jsx)(X.__,{label:n})},t)})]}),(0,i.jsxs)(eb,{children:[l&&(0,i.jsx)(ev,{value:"manifest-about",children:(0,i.jsx)(eO,{})}),n&&n.map(e=>(0,i.jsx)(ev,{value:e.id,children:(0,i.jsx)(e$,{resource:e})},e.id))]})]}):(0,i.jsx)(i.Fragment,{})},e_=n(2929),eD=n.n(e_);let eN=(0,b.zo)("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),eG=(0,b.zo)("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),eZ=(0,b.zo)("div",{width:"100%",height:"61.8vh",maxHeight:"100vh",background:"black",backgroundSize:"contain",color:"white",position:"relative",zIndex:"1",overflow:"hidden"}),eq=(0,b.zo)("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",backgroundColor:"$primary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&#rotateRight":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&#rotateLeft":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&#reset":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}});var eY=e=>{let{id:t,label:n,children:o}=e;return(0,i.jsx)(eq,{id:t,"data-testid":"openseadragon-button",children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"".concat(t,"-svg-title"),"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img",children:[(0,i.jsx)("title",{id:"".concat(t,"-svg-title"),children:n}),o]})})};let eU=(0,b.zo)("div",{position:"absolute",zIndex:"1",top:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),eJ=()=>(0,i.jsx)("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),eX=()=>(0,i.jsx)("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),eK=()=>(0,i.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),eQ=()=>(0,i.jsx)("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),e0=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),(0,i.jsx)("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})]});var e1=e=>{let{hasPlaceholder:t,options:n}=e;return(0,i.jsxs)(eU,{"data-testid":"openseadragon-controls",hasPlaceholder:t,id:"openseadragon-controls",children:[n.showZoomControl&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eY,{id:"zoomIn",label:"zoom in",children:(0,i.jsx)(eJ,{})}),(0,i.jsx)(eY,{id:"zoomOut",label:"zoom out",children:(0,i.jsx)(eX,{})})]}),n.showFullPageControl&&(0,i.jsx)(eY,{id:"fullPage",label:"full page",children:(0,i.jsx)(eK,{})}),n.showRotationControl&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eY,{id:"rotateRight",label:"rotate right",children:(0,i.jsx)(e0,{})}),(0,i.jsx)(eY,{id:"rotateLeft",label:"rotate left",children:(0,i.jsx)(e0,{})})]}),n.showHomeControl&&(0,i.jsx)(eY,{id:"reset",label:"reset",children:(0,i.jsx)(eQ,{})})]})},e2=n(2785),e4=e=>{let{uri:t,imageType:n,hasPlaceholder:r}=e,[a,l]=(0,o.useState)(),s=u(),{configOptions:d}=s,c=(0,eC.Z)(),h={id:"openseadragon-viewport-".concat(c),loadTilesWithAjax:!0,fullPageButton:"fullPage",homeButton:"reset",rotateLeftButton:"rotateLeft",rotateRightButton:"rotateRight",zoomInButton:"zoomIn",zoomOutButton:"zoomOut",showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",navigatorId:"openseadragon-navigator-".concat(c),gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!0},...d.openSeadragon,ajaxWithCredentials:d.withCredentials};return(0,o.useEffect)(()=>{t!==a&&l(t)},[]),(0,o.useEffect)(()=>{if(a)switch(n){case"simpleImage":eD()(h).addSimpleImage({url:a});break;case"tiledImage":(0,e2.Er)(a).then(e=>eD()(h).addTiledImage({tileSource:e}));break;default:console.warn("Unable to render ".concat(a,' in OpenSeadragon as type: "').concat(n,'"'))}},[a]),(0,i.jsxs)(eZ,{css:{backgroundColor:d.canvasBackgroundColor,height:d.canvasHeight},children:[(0,i.jsx)(e1,{options:h,hasPlaceholder:r}),(0,i.jsx)(eN,{id:"openseadragon-navigator-".concat(c)}),(0,i.jsx)(eG,{id:"openseadragon-viewport-".concat(c)})]})},e3=e=>{let{body:t,hasPlaceholder:n}=e,[r,a]=(0,o.useState)(),[l,s]=(0,o.useState)();return(0,o.useEffect)(()=>{Array.isArray(t.service)&&t.service.length>0?(a("tiledImage"),s((0,e2.AG)(t.service))):(a("simpleImage"),s(t.id))},[t]),(0,i.jsx)(e4,{uri:l,imageType:r,hasPlaceholder:n},l)};let e5=(0,b.zo)("button",{background:"none",border:"none",cursor:"zoom-in",width:"100%",height:"100%",margin:"0",padding:"0",display:"flex",transition:"$all","& img":{width:"100%",height:"100%",objectFit:"contain",color:"transparent",transition:"$all"},variants:{isMedia:{true:{cursor:"pointer"}}}});var e6=e=>{let{isMedia:t,label:n,placeholderCanvas:o,setIsInteractive:r}=e,{vault:a}=u(),l=g(a,o),s=n?R(n):["placeholder image"];return(0,i.jsx)(e5,{onClick:()=>r(!0),isMedia:t,children:(0,i.jsx)("img",{src:(null==l?void 0:l.id)||"",alt:s.join(),height:null==l?void 0:l.height,width:null==l?void 0:l.width})})};let e8=(0,b.zo)(eq,{position:"absolute",width:"2rem",top:"1rem",right:"1rem",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",transition:"$all",borderRadius:"50%",backgroundColor:"$accent",cursor:"pointer","&:hover, &:focus":{backgroundColor:"$accent !important"},variants:{isInteractive:{true:{"&:hover":{opacity:"1"}},false:{}},isMedia:{true:{cursor:"pointer !important"}}},compoundVariants:[{isInteractive:!1,isMedia:!0,css:{top:"50%",right:"50%",width:"4rem",height:"4rem",transform:"translate(50%,-50%)"}}]}),e7=(0,b.zo)("div",{position:"relative",zIndex:"0","&:hover":{["".concat(e8)]:{backgroundColor:"$accent"},["".concat(e5)]:{backgroundColor:"#6662",img:{filter:"brightness(0.85)"}}}});var e9=n(5421);let te=(0,b.zo)("div",{position:"relative",backgroundColor:"$primaryAlt",display:"flex",flexGrow:"0",flexShrink:"1",maxHeight:"500px",zIndex:"1",video:{backgroundColor:"transparent",objectFit:"contain",width:"100%",height:"100%",position:"relative",zIndex:"1"}}),tt=(0,b.zo)("canvas",{position:"absolute",width:"100%",height:"100%",zIndex:"0"}),tn=o.forwardRef((e,t)=>{let n=o.useRef(null);function r(){let e=t.current,i=new AudioContext,o=i.createMediaElementSource(e),r=i.createAnalyser(),a=n.current;if(!a)return;a.width=e.offsetWidth,a.height=e.offsetHeight;let l=a.getContext("2d");o.connect(r),r.connect(i.destination),r.fftSize=256;let s=r.frequencyBinCount,d=new Uint8Array(s);setInterval(function(){!function(e,t,n,i,o,r){let a,l=o/n*2.6,s=0;e.getByteFrequencyData(i),t.fillStyle="#000000",t.fillRect(0,0,o,r);for(let e=0;e<n;e++)a=2*i[e],t.fillStyle="rgba(".concat(78,", 42, 132, 1)"),t.fillRect(s,r-a,l,a),s+=l+6}(r,l,s,d,a.width,a.height)},20)}return o.useEffect(()=>{t&&(t.current.onplay=r)},[t]),(0,i.jsx)(tt,{ref:n})});var ti=e=>{let{resource:t,ignoreCaptionLabels:n}=e,o=R(t.label,"en"),r=o.some(e=>n.includes(e));return r?null:(0,i.jsx)("track",{src:t.id,label:o,srcLang:"en","data-testid":"player-track"},t.id)},to=e=>{var t;let{resources:n,painting:r}=e,[a,l]=o.useState(0),[s,d]=o.useState(),c=o.useRef(null),h=null==r?void 0:null===(t=r.format)||void 0===t?void 0:t.includes("audio/"),m=u(),{activeCanvas:p,configOptions:x,vault:f}=m;return(0,o.useEffect)(()=>{if(!r.id||!c.current||"m3u8"!==r.id.split(".").pop())return;let e=new e9.Z({xhrSetup:function(e,t){e.withCredentials=x.withCredentials}});return e.attachMedia(c.current),e.on(e9.Z.Events.MEDIA_ATTACHED,function(){e.loadSource(r.id)}),e.on(e9.Z.Events.ERROR,function(t,n){if(n.fatal)switch(n.type){case e9.Z.ErrorTypes.NETWORK_ERROR:console.error("fatal ".concat(t," network error encountered, try to recover")),e.startLoad();break;case e9.Z.ErrorTypes.MEDIA_ERROR:console.error("fatal ".concat(t," media error encountered, try to recover")),e.recoverMediaError();break;default:e.destroy()}}),()=>{if(e&&c.current){let t=c.current;e.detachMedia(),e.destroy(),t.currentTime=0}}},[r.id]),(0,o.useEffect)(()=>{var e,t,n,i;let o=f.get(p),r=(null===(e=o.accompanyingCanvas)||void 0===e?void 0:e.id)?g(f,null===(t=o.accompanyingCanvas)||void 0===t?void 0:t.id):null,l=(null===(n=o.placeholderCanvas)||void 0===n?void 0:n.id)?g(f,null===(i=o.placeholderCanvas)||void 0===i?void 0:i.id):null;r&&l?0===a?d(l.id):d(r.id):(r&&d(r.id),l&&d(l.id))},[p,a]),(0,o.useEffect)(()=>{if(null==c?void 0:c.current){let e=c.current;return null==e||e.addEventListener("timeupdate",()=>l(e.currentTime)),()=>document.removeEventListener("timeupdate",()=>{})}},[null==c?void 0:c.current]),(0,i.jsxs)(te,{css:{backgroundColor:x.canvasBackgroundColor,maxHeight:x.canvasHeight},children:[(0,i.jsxs)("video",{id:"clover-iiif-video",ref:c,controls:!0,height:r.height,width:r.width,crossOrigin:"anonymous",poster:s,style:{maxHeight:x.canvasHeight},children:[(0,i.jsx)("source",{src:r.id,type:r.format}),n.length>0&&n.map(e=>(0,i.jsx)(ti,{resource:e,ignoreCaptionLabels:x.ignoreCaptionLabels},e.id)),"Sorry, your browser doesn't support embedded videos."]},r.id),h&&(0,i.jsx)(tn,{ref:c})]})};let tr=()=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"close-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img",children:[(0,i.jsx)("title",{id:"close-svg-title",children:"close"}),(0,i.jsx)("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})]}),ta=e=>{let{isMedia:t}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"open-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img",children:[(0,i.jsx)("title",{id:"open-svg-title",children:"open"}),t?(0,i.jsx)("path",{d:"M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"m456.69,421.39l-94.09-94.09c22.65-30.16,34.88-66.86,34.84-104.58,0-96.34-78.38-174.72-174.72-174.72S48,126.38,48,222.72s78.38,174.72,174.72,174.72c37.72.04,74.42-12.19,104.58-34.84l94.09,94.09c10.29,9.2,26.1,8.32,35.3-1.98,8.48-9.49,8.48-23.83,0-33.32Zm-233.97-73.87c-68.89-.08-124.72-55.91-124.8-124.8h0c0-68.93,55.87-124.8,124.8-124.8s124.8,55.87,124.8,124.8-55.87,124.8-124.8,124.8Z"}),(0,i.jsx)("path",{d:"m279.5,197.76h-3.35s-28.47,0-28.47,0v-31.82c-.77-13.79-12.57-24.33-26.36-23.56-12.71.71-22.85,10.86-23.56,23.56v3.35h0v28.47h-31.82c-13.79.77-24.33,12.57-23.56,26.36.71,12.71,10.86,22.85,23.56,23.56h3.35s28.47,0,28.47,0v31.82c.77,13.79,12.57,24.33,26.36,23.56,12.71-.71,22.85-10.86,23.56-23.56v-3.35h0v-28.47h31.82c13.79-.77,24.33-12.57,23.56-26.36-.71-12.71-10.86-22.85-23.56-23.56Z"})]})]})};var tl=e=>{let{handleToggle:t,isInteractive:n,isMedia:o}=e;return(0,i.jsx)(e8,{onClick:t,isInteractive:n,isMedia:o,children:n?(0,i.jsx)(tr,{}):(0,i.jsx)(ta,{isMedia:o})})},ts=e=>{var t;let{activeCanvas:n,isMedia:r,painting:a,resources:l}=e,[s,d]=o.useState(!1),{configOptions:c,vault:h}=u(),m=h.get(n),p=null==m?void 0:null===(t=m.placeholderCanvas)||void 0===t?void 0:t.id,x=p&&!s&&!r;return(0,i.jsxs)(e7,{css:{maxHeight:c.canvasHeight,backgroundColor:c.canvasBackgroundColor},children:[p&&!r&&(0,i.jsx)(tl,{handleToggle:()=>d(!s),isInteractive:s,isMedia:r}),x&&!r&&(0,i.jsx)(e6,{isMedia:r,label:null==m?void 0:m.label,placeholderCanvas:p,setIsInteractive:d}),!x&&(0,i.jsx)("div",{children:r?(0,i.jsx)(to,{painting:a,resources:l}):a&&(0,i.jsx)(e3,{body:a,hasPlaceholder:!!p},n)})]})},td=e=>{let{activeCanvas:t,painting:n,resources:o,items:r,isAbout:a,isInformation:l,isNavigator:s,isNavigatorOpen:d,isMedia:c}=e;return(0,i.jsxs)(k,{className:"clover-content",children:[(0,i.jsxs)(S,{children:[(0,i.jsx)(ts,{activeCanvas:t,isMedia:c,painting:n,resources:o}),s&&(0,i.jsx)(I,{children:(0,i.jsx)("span",{children:d?"View Items":"More Information"})}),r.length>1&&(0,i.jsx)(z,{className:"clover-canvases",children:(0,i.jsx)(em,{items:r,activeItem:0})})]}),l&&(a||s)&&(0,i.jsx)($,{children:(0,i.jsx)(M,{children:(0,i.jsx)(eP,{activeCanvas:t,resources:o})})})]})},tc=n(9015);let th=(0,b.zo)("svg",{height:"19px",color:"$accent",fill:"$accent",stroke:"$accent",display:"flex",margin:"0.25rem 0.85rem"}),tu=(0,b.zo)(tc.xz,{fontSize:"1.25rem",fontWeight:"400",fontFamily:"inherit",alignSelf:"flex-start",flexGrow:"1",backgroundColor:"$secondary",cursor:"pointer",transition:"$all",border:"1px solid $secondaryMuted",boxShadow:"2px 2px 5px #0001",borderRadius:"3px",display:"flex",alignItems:"center",paddingLeft:"0.5rem","@sm":{fontSize:"1rem"}}),tm=(0,b.zo)(tc.VY,{borderRadius:"3px",boxShadow:"3px 3px 8px #0003",backgroundColor:"$secondary",marginTop:"2.25rem",marginLeft:"6px",paddingBottom:"0.25rem",maxHeight:"calc(61.8vh - 2.5rem) !important",borderTopLeftRadius:"0",border:"1px solid $secondaryMuted",maxWidth:"90vw"}),tp=(0,b.zo)(tc.ck,{display:"flex",alignItems:"center",fontFamily:"inherit",padding:"0.25rem 0.5rem",color:"$primary",fontWeight:"400",fontSize:"0.8333rem",cursor:"pointer",backgroundColor:"$secondary",width:"calc(100% - 1rem)","> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},'&[data-state="checked"]':{fontWeight:"700",color:"$primary !important"},"&:hover":{color:"$accent"},img:{width:"31px",height:"31px",marginRight:"0.5rem",borderRadius:"3px"}}),tx=(0,b.zo)(tc.__,{color:"$primaryMuted",fontFamily:"inherit",fontSize:"0.85rem",padding:"0.5rem 1rem 0.5rem 0.5rem",display:"flex",alignItems:"center",marginBottom:"0.25rem",borderRadius:"3px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",backgroundColor:"$secondaryMuted"}),tg=(0,b.zo)("div",{position:"relative",zIndex:"5"}),tf=(0,b.zo)(G.Trigger,{width:"30px",padding:"5px",margin:"0 0 0 2rem"}),tv=(0,b.zo)(G.Content,{display:"flex",flexDirection:"column",fontSize:"0.8333rem",border:"none",boxShadow:"2px 2px 5px #0003",zIndex:"2",button:{display:"flex",textDecoration:"none",marginBottom:"0.5em",color:"$accentAlt",cursor:"pointer",background:"$secondary",border:"none","&:last-child":{marginBottom:"0"}}}),tb=(0,b.zo)("span",{fontSize:"1.33rem",alignSelf:"flex-start",flexGrow:"1",flexShrink:"0","@sm":{fontSize:"1rem"}}),tj=(0,b.zo)("header",{display:"flex",backgroundColor:"transparent !important",justifyContent:"flex-end",padding:"1rem",["> ".concat(tg)]:{flexGrow:"1",flexShrink:"0"},form:{flexGrow:"0",flexShrink:"1"}});var ty=e=>{let{direction:t,title:n}=e;return(0,i.jsxs)(th,{xmlns:"http://www.w3.org/2000/svg",focusable:"false",viewBox:"0 0 512 512",role:"img",children:[(0,i.jsx)("title",{children:n}),"up"===t&&(0,i.jsx)(()=>(0,i.jsx)("path",{d:"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z"}),{}),"down"===t&&(0,i.jsx)(()=>(0,i.jsx)("path",{d:"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"}),{})]})},tw=()=>{let e=m(),t=u(),{activeManifest:n,collection:o,configOptions:r,vault:a}=t,l=null==r?void 0:r.canvasHeight;return(0,i.jsx)(tg,{children:(0,i.jsxs)(tc.fC,{value:n,onValueChange:t=>{e({type:"updateActiveManifest",manifestId:t})},children:[(0,i.jsxs)(tu,{children:[(0,i.jsx)(tc.B4,{}),(0,i.jsx)(tc.JO,{children:(0,i.jsx)(ty,{direction:"down",title:"select from collection"})})]}),(0,i.jsxs)(tm,{css:{maxHeight:"".concat(l," !important")},children:[(0,i.jsx)(tc.u_,{children:(0,i.jsx)(ty,{direction:"up",title:"scroll up for more"})}),(0,i.jsx)(tc.l_,{children:(0,i.jsxs)(tc.ZA,{children:[(0,i.jsx)(tx,{children:(0,i.jsx)(X.__,{label:o.label})}),o.items.map(e=>(0,i.jsxs)(tp,{value:e.id,children:[(null==e?void 0:e.thumbnail)&&(0,i.jsx)(X.pl,{thumbnail:a.get(null==e?void 0:e.thumbnail)}),(0,i.jsx)(tc.eT,{children:(0,i.jsx)(X.__,{label:e.label})}),(0,i.jsx)(tc.wU,{})]},e.id))]})}),(0,i.jsx)(tc.$G,{children:(0,i.jsx)(ty,{direction:"down",title:"scroll down for more"})})]})]})})};let tC=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500,[n,i]=(0,o.useState)(),r=(0,o.useCallback)(()=>{navigator.clipboard.writeText(e).then(()=>i("copied"),()=>i("failed"))},[e]);return(0,o.useEffect)(()=>{if(!n)return;let e=setTimeout(()=>i(void 0),t);return()=>clearTimeout(e)},[n]),[n,r]},tz=(0,b.zo)("span",{display:"flex",alignContent:"center",alignItems:"center",padding:"0.125rem 0.25rem 0",marginTop:"-0.125rem",marginLeft:"0.5rem",backgroundColor:"$accent",color:"$secondary",borderRadius:"3px",fontSize:"0.6111rem",textTransform:"uppercase",lineHeight:"1em"}),tk=e=>{let{status:t}=e;return t?(0,i.jsx)(tz,{"data-copy-status":t,children:t}):null};var tS=e=>{let{textPrompt:t,textToCopy:n}=e,[o,r]=tC(n);return(0,i.jsxs)("button",{onClick:r,children:[t," ",(0,i.jsx)(tk,{status:o})]})},tI=()=>{let e="#ed1d33",t="#2873ab";return(0,i.jsxs)("svg",{viewBox:"0 0 493.35999 441.33334",id:"iiif-logo",version:"1.1",children:[(0,i.jsx)("title",{children:"IIIF Manifest Options"}),(0,i.jsx)("g",{transform:"matrix(1.3333333,0,0,-1.3333333,0,441.33333)",children:(0,i.jsxs)("g",{transform:"scale(0.1)",children:[(0,i.jsx)("path",{style:{fill:t},d:"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5"}),(0,i.jsx)("path",{style:{fill:t},d:"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18"}),(0,i.jsx)("path",{style:{fill:e},d:"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5"}),(0,i.jsx)("path",{style:{fill:e},d:"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18"}),(0,i.jsx)("path",{style:{fill:t},d:"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5"}),(0,i.jsx)("path",{style:{fill:t},d:"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18"}),(0,i.jsx)("path",{style:{fill:e},d:"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950"})]})})]})},tM=n(6256);let t$=(0,b.zo)(tM.fC,{all:"unset",height:"2rem",width:"3.236rem",backgroundColor:"$secondaryAlt",borderRadius:"9999px",position:"relative",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px $secondaryAlt"},'&[data-state="checked"]':{backgroundColor:"$accent",boxShadow:"inset 2px 2px 5px #0003"}}),tL=(0,b.zo)(tM.bU,{display:"block",height:"calc(2rem - 12px)",width:"calc(2rem - 12px)",backgroundColor:"$secondary",borderRadius:"100%",boxShadow:"2px 2px 5px #0001",transition:"$all",transform:"translateX(6px)",willChange:"transform",'&[data-state="checked"]':{transform:"translateX(calc(1.236rem + 6px))"}}),tA=(0,b.zo)("div",{display:"flex",alignItems:"center",paddingLeft:"1.618rem"}),tE=(0,b.zo)("label",{fontSize:"0.8333rem",fontWeight:"400",lineHeight:"1em",userSelect:"none",cursor:"pointer",paddingRight:"0.618rem"}),tR=(0,b.zo)("form",{});var tT=()=>{let e=m(),[t,n]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{e({type:"updateInformationExpanded",informationExpanded:t})},[t]),(0,i.jsx)(tR,{children:(0,i.jsxs)(tA,{children:[(0,i.jsx)(tE,{htmlFor:"information-toggle",css:t?{opacity:"1"}:{},children:"More Information"}),(0,i.jsx)(t$,{checked:t,onCheckedChange:()=>n(!t),id:"information-toggle",children:(0,i.jsx)(tL,{})})]})})},tF=e=>{let{manifestId:t,manifestLabel:n}=e,o=u(),{collection:r,configOptions:a}=o,{showTitle:l,showIIIFBadge:s,showInformationToggle:d}=a;return(null==r?void 0:r.items)||l||s||d?(0,i.jsxs)(tj,{className:"clover-header",children:[(null==r?void 0:r.items)?(0,i.jsx)(tw,{}):(0,i.jsx)(tb,{children:(0,i.jsx)(X.__,{label:n})}),s&&(0,i.jsxs)(G,{children:[(0,i.jsx)(tf,{children:(0,i.jsx)(tI,{})}),(0,i.jsxs)(tv,{children:[(null==r?void 0:r.items)&&(0,i.jsx)("button",{onClick:e=>{e.preventDefault(),window.open(r.id,"_blank")},children:"View Collection"}),(0,i.jsx)("button",{onClick:e=>{e.preventDefault(),window.open(t,"_blank")},children:"View Manifest"})," ",(null==r?void 0:r.items)&&(0,i.jsx)(tS,{textPrompt:"Copy Collection URL",textToCopy:r.id}),(0,i.jsx)(tS,{textPrompt:"Copy Manifest URL",textToCopy:t})]})]}),d&&(0,i.jsx)(tT,{})]}):(0,i.jsx)(i.Fragment,{})};let tH=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,n]=(0,o.useState)(e);return(0,o.useLayoutEffect)(()=>{if(!t)return;let e=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=e}},[t]),(0,o.useEffect)(()=>{t!==e&&n(e)},[e]),[t,n]},tB=e=>{let t=()=>!!window.matchMedia&&window.matchMedia(e).matches,[n,i]=(0,o.useState)(t);return(0,o.useEffect)(()=>{let e=()=>i(t);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),n};var tV=e=>{let{manifest:t,theme:n}=e,r=u(),{activeCanvas:a,informationExpanded:l,vault:s,configOptions:d}=r,[c,h]=(0,o.useState)(!1),[m,x]=(0,o.useState)(!1),[j,y]=(0,o.useState)(!0),[w,z]=(0,o.useState)(void 0),[k,S]=(0,o.useState)([]),[I,M]=tH(!1),$=tB(b.BC.sm);return(0,o.useEffect)(()=>{if(!$){y(!0);return}y(!1)},[$]),(0,o.useEffect)(()=>{if(!$){M(!1);return}M(j)},[j]),(0,o.useEffect)(()=>{let e=g(s,a),t=f(s,a,"text/vtt");e&&(h(["Sound","Video"].indexOf(e.type)>-1),z({...e})),S(t),x(0!==t.length)},[a]),(0,i.jsx)(v.SV,{FallbackComponent:C,children:(0,i.jsx)(L,{className:"".concat(n," clover-iiif"),"data-body-locked":I,"data-navigator":m,"data-navigator-open":j,children:(0,i.jsxs)(p.fC,{open:j,onOpenChange:y,children:[(0,i.jsx)(tF,{manifestLabel:t.label,manifestId:t.id}),(0,i.jsx)(td,{activeCanvas:a,painting:w,resources:k,items:t.items,isAbout:d.renderAbout,isMedia:c,isInformation:l,isNavigator:m,isNavigatorOpen:j})]})})})},tW=n(458);let tO={ignoreCache:!1,headers:{Accept:"application/json, text/javascript, text/plain"},timeout:5e3,withCredentials:!1};function tP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{ok:!1,status:e.status,statusText:e.statusText,headers:e.getAllResponseHeaders(),data:t||e.statusText,json:()=>JSON.parse(t||e.statusText)}}let t_=e=>{let{canvasIdCallback:t,customTheme:n,iiifContent:r,options:a}=e,l=m(),s=u(),{activeCanvas:d,activeManifest:c,isLoaded:h,vault:p}=s,[x,g]=(0,o.useState)(),[f,v]=(0,o.useState)(),b={};return(n&&(b=(0,tW.jG)("custom",n)),(0,o.useEffect)(()=>{t&&t(d)},[d]),(0,o.useEffect)(()=>{c&&p.loadManifest(c).then(e=>{v(e),l({type:"updateActiveCanvas",canvasId:e.items[0]&&e.items[0].id})}).catch(e=>{console.error("Manifest failed to load: ".concat(e))}).finally(()=>{l({type:"updateIsLoaded",isLoaded:!0})})},[c]),(0,o.useEffect)(()=>{l({type:"updateConfigOptions",configOptions:a}),p.load(r).then(e=>{g(e)}).catch(e=>{console.error("The IIIF resource ".concat(r," failed to load: ").concat(e))})},[r,a]),(0,o.useEffect)(()=>{let e=[];(null==x?void 0:x.type)==="Collection"?(l({type:"updateCollection",collection:x}),(e=x.items.filter(e=>"Manifest"===e.type).map(e=>e.id)).length>0&&l({type:"updateActiveManifest",manifestId:e[0]})):(null==x?void 0:x.type)==="Manifest"&&l({type:"updateActiveManifest",manifestId:x.id})},[x]),h)?f&&f.items?0===f.items.length?(console.log("The IIIF manifest ".concat(r," does not contain canvases.")),(0,i.jsx)(i.Fragment,{})):(0,i.jsx)(tV,{manifest:f,theme:b},f.id):(console.log("The IIIF manifest ".concat(r," failed to load.")),(0,i.jsx)(i.Fragment,{})):(0,i.jsx)(i.Fragment,{children:"Loading"})};var tD=e=>{let{canvasIdCallback:t=()=>{},customTheme:n,iiifContent:o,id:a,manifestId:s,options:d}=e,c=o;return a&&(c=a),s&&(c=s),(0,i.jsx)(h,{initialState:{...l,vault:new r.j({customFetcher:e=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tO,n=t.headers||tO.headers;return new Promise((i,o)=>{let r=new XMLHttpRequest;r.open("get",e),r.withCredentials=t.withCredentials,n&&Object.keys(n).forEach(e=>r.setRequestHeader(e,n[e])),r.onload=()=>{i({ok:r.status>=200&&r.status<300,status:r.status,statusText:r.statusText,headers:r.getAllResponseHeaders(),data:r.responseText,json:()=>JSON.parse(r.responseText)})},r.onerror=()=>{o(tP(r,"Failed to make request."))},r.ontimeout=()=>{o(tP(r,"Request took longer than expected."))},r.send()})})(e,{withCredentials:null==d?void 0:d.withCredentials,headers:null==d?void 0:d.requestHeaders}).then(e=>JSON.parse(e.data))})},children:(0,i.jsx)(t_,{iiifContent:c,canvasIdCallback:t,customTheme:n,options:d})})}},2785:function(e,t,n){n.d(t,{AG:function(){return r},Er:function(){return o},zH:function(){return i}});let i=e=>{if(null==e?void 0:e.items){let t=null==e?void 0:e.items[0];if(null==t?void 0:t.items){let e=null==t?void 0:t.items[0].body;if(null==e?void 0:e.hasOwnProperty("id"))return e.id}}},o=e=>fetch("".concat(e.replace(/\/$/,""),"/info.json")).then(e=>e.json()).then(e=>e).catch(t=>{console.error("The IIIF tilesource ".concat(e.replace(/\/$/,""),"/info.json failed to load: ").concat(t))}),r=e=>{let t,n;return Array.isArray(e)&&(t=e[0])&&(n="@id"in t?t["@id"]:t.id),n}}}]);